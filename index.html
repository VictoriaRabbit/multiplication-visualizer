<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Practice Quiz</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        .celebration {
            animation: celebration 0.8s ease-in-out;
        }
        @keyframes celebration {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Custom slider styling */
        .slider::-webkit-slider-thumb {
            appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider::-moz-range-thumb {
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const Play = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="5,3 19,12 5,21 5,3"></polygon>
            </svg>
        );
        
        const Pause = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
        );
        
        const RotateCcw = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="1,4 1,10 7,10"></polyline>
                <path d="M3.51,15a9,9,0,0,0,2.13,3.09,9,9,0,0,0,13.37,0,9,9,0,0,0,0-12.76,9,9,0,0,0-9.51-1.85"></path>
            </svg>
        );
        
        const Trophy = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55.47.98.97 1.21C11.56 18.75 12.23 19 13 19c.77 0 1.44-.25 2.03-.79.5-.23.97-.66.97-1.21v-2.34"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );

        const Star = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
            </svg>
        );

        const MultiplicationPractice = () => {
            const [num1, setNum1] = useState(12);
            const [num2, setNum2] = useState(8);
            const [userAnswer, setUserAnswer] = useState('');
            const [showReward, setShowReward] = useState(false);
            const [isCorrect, setIsCorrect] = useState(null);
            const [isAnimating, setIsAnimating] = useState(false);
            const [currentCount, setCurrentCount] = useState(0);
            const [colorMode, setColorMode] = useState('fill');
            const [isSelecting, setIsSelecting] = useState(false);
            const [selectionEnd, setSelectionEnd] = useState({ row: 0, col: 0 });
            const [isDragging, setIsDragging] = useState(false);
            const [animationSpeed, setAnimationSpeed] = useState(100);
            
            // Practice tracking
            const [practices, setPractices] = useState({
                singleDigit: 0,    // 1-9 Ã— 1-9
                doubleDigit: 0,    // 10-99 involved
                tripleDigit: 0     // 100+ involved
            });

            // Get breakdown parts for area model
            const getAreaBreakdown = (rows, cols) => {
                if (rows <= 10 && cols <= 10) return null;
                
                // Break at 10 for easier mental math, or at 20/30 for larger numbers
                const getBreakPoint = (num) => {
                    if (num <= 10) return num;
                    if (num <= 20) return 10;
                    if (num <= 30) return 20;
                    return 30;
                };
                
                const rowBreak = getBreakPoint(rows);
                const colBreak = getBreakPoint(cols);
                
                return {
                    topLeft: { rows: rowBreak, cols: colBreak, product: rowBreak * colBreak },
                    topRight: cols > colBreak ? { rows: rowBreak, cols: cols - colBreak, product: rowBreak * (cols - colBreak) } : null,
                    bottomLeft: rows > rowBreak ? { rows: rows - rowBreak, cols: colBreak, product: (rows - rowBreak) * colBreak } : null,
                    bottomRight: (rows > rowBreak && cols > colBreak) ? { rows: rows - rowBreak, cols: cols - colBreak, product: (rows - rowBreak) * (cols - colBreak) } : null
                };
            };
            const maxSize = 50;
            const cellSize = Math.max(12, Math.min(20, 500 / Math.max(num1, num2)));
            const correctAnswer = num1 * num2;

            // Get current breakdown for display
            const currentBreakdown = isSelecting ? 
                getAreaBreakdown(selectionEnd.row + 1, selectionEnd.col + 1) : 
                getAreaBreakdown(num1, num2);

            // Determine digit category
            const getDigitCategory = (n1, n2) => {
                const max = Math.max(n1, n2);
                if (max >= 100) return 'tripleDigit';
                if (max >= 10) return 'doubleDigit';
                return 'singleDigit';
            };

            // Generate new problem
            // Generate new problem - ensure at least one double digit
            const generateNewProblem = () => {
                let newNum1, newNum2;
                
                // Ensure at least one number is double digit (10-30)
                const useDoubleDigitFirst = Math.random() < 0.5;
                
                if (useDoubleDigitFirst) {
                    newNum1 = Math.floor(Math.random() * 21) + 10; // 10-30
                    newNum2 = Math.floor(Math.random() * 30) + 1;   // 1-30
                } else {
                    newNum1 = Math.floor(Math.random() * 30) + 1;   // 1-30
                    newNum2 = Math.floor(Math.random() * 21) + 10; // 10-30
                }
                
                setNum1(newNum1);
                setNum2(newNum2);
                setUserAnswer('');
                setIsCorrect(null);
                setShowReward(false);
                resetAnimation();
            };

            const checkAnswer = () => {
                const userNum = parseInt(userAnswer);
                const category = getDigitCategory(num1, num2);
                
                if (userNum === correctAnswer) {
                    setIsCorrect(true);
                    setShowReward(true);
                    setPractices(prev => ({
                        ...prev,
                        [category]: prev[category] + 1
                    }));
                    
                    // Don't auto-generate new problem - let user explore the visualization
                } else {
                    setIsCorrect(false);
                    setTimeout(() => {
                        setIsCorrect(null);
                    }, 1500);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && userAnswer.trim() !== '' && !showReward) {
                    checkAnswer();
                }
            };

            // Animation logic
            useEffect(() => {
                if (isAnimating && currentCount < num1 * num2) {
                    const timer = setTimeout(() => {
                        setCurrentCount(prev => prev + 1);
                    }, animationSpeed);
                    return () => clearTimeout(timer);
                } else if (currentCount >= num1 * num2) {
                    setIsAnimating(false);
                }
            }, [isAnimating, currentCount, num1, num2, animationSpeed]);

            const startAnimation = () => {
                setCurrentCount(0);
                setIsAnimating(true);
            };

            const resetAnimation = () => {
                setIsAnimating(false);
                setCurrentCount(0);
            };

            const showAll = () => {
                setCurrentCount(num1 * num2);
                setIsAnimating(false);
            };

            const getCellColor = (index) => {
                const row = Math.floor(index / num2);
                const col = index % num2;
                const isInSelection = isSelecting && row <= selectionEnd.row && col <= selectionEnd.col;
                const isVisible = index < currentCount || (!isAnimating && currentCount === 0);
                
                if (isInSelection && !isAnimating) {
                    return 'bg-orange-300 border-orange-400 shadow-md';
                }
                
                if (!isVisible) return 'bg-gray-100 border-gray-200';
                
                if (colorMode === 'fill') {
                    return 'bg-blue-400 border-blue-500';
                } else if (colorMode === 'rainbow') {
                    const colors = [
                        'bg-red-400 border-red-500',
                        'bg-orange-400 border-orange-500',
                        'bg-yellow-400 border-yellow-500',
                        'bg-green-400 border-green-500',
                        'bg-blue-400 border-blue-500',
                        'bg-indigo-400 border-indigo-500',
                        'bg-purple-400 border-purple-500'
                    ];
                    return colors[index % colors.length];
                } else {
                    const colors = [
                        'bg-red-300 border-red-400',
                        'bg-blue-300 border-blue-400',
                        'bg-green-300 border-green-400',
                        'bg-yellow-300 border-yellow-400',
                        'bg-purple-300 border-purple-400',
                        'bg-pink-300 border-pink-400',
                        'bg-indigo-300 border-indigo-400'
                    ];
                    return colors[row % colors.length];
                }
            };

            const getCellBorderStyle = (index) => {
                const row = Math.floor(index / num2);
                const col = index % num2;
                
                let borderStyle = '';
                
                // Add borders for area model breakdown
                if (currentBreakdown) {
                    const activeRows = isSelecting ? selectionEnd.row + 1 : num1;
                    const activeCols = isSelecting ? selectionEnd.col + 1 : num2;
                    
                    const rowBreakPoint = currentBreakdown.topLeft.rows;
                    const colBreakPoint = currentBreakdown.topLeft.cols;
                    
                    // Only show borders within the active selection/full grid
                    if (row < activeRows && col < activeCols) {
                        // Vertical border after break column
                        if (col === colBreakPoint - 1 && activeCols > colBreakPoint) {
                            borderStyle += ' border-r-4 border-r-black';
                        }
                        
                        // Horizontal border after break row  
                        if (row === rowBreakPoint - 1 && activeRows > rowBreakPoint) {
                            borderStyle += ' border-b-4 border-b-black';
                        }
                    }
                }
                
                return borderStyle;
            };

            const handleCellMouseDown = (index) => {
                if (isAnimating) return;
                const row = Math.floor(index / num2);
                const col = index % num2;
                setSelectionEnd({ row, col });
                setIsSelecting(true);
                setIsDragging(true);
            };

            const handleCellMouseEnter = (index) => {
                if (isDragging && !isAnimating) {
                    const row = Math.floor(index / num2);
                    const col = index % num2;
                    setSelectionEnd({ row, col });
                }
            };

            const handleMouseUp = () => {
                setIsDragging(false);
            };

            const clearSelection = () => {
                setIsSelecting(false);
                setSelectionEnd({ row: 0, col: 0 });
            };

            useEffect(() => {
                document.addEventListener('mouseup', handleMouseUp);
                return () => document.removeEventListener('mouseup', handleMouseUp);
            }, []);

            const renderGrid = () => {
                const cells = [];
                let selectionCounter = 1;
                
                for (let i = 0; i < num1 * num2; i++) {
                    const row = Math.floor(i / num2);
                    const col = i % num2;
                    const isInSelection = isSelecting && row <= selectionEnd.row && col <= selectionEnd.col;
                    const isVisible = i < currentCount || (!isAnimating && currentCount === 0);
                    const showCellNumber = isVisible && (isInSelection || isAnimating);
                    
                    let cellNumber = i + 1;
                    if (isInSelection && !isAnimating) {
                        cellNumber = selectionCounter++;
                    }
                    
                    cells.push(
                        React.createElement('div', {
                            key: i,
                            className: `border-2 transition-all duration-200 flex items-center justify-center text-xs font-bold cursor-pointer select-none ${getCellColor(i)} ${getCellBorderStyle(i)}`,
                            style: {
                                width: cellSize,
                                height: cellSize,
                                fontSize: cellSize < 25 ? '8px' : '10px'
                            },
                            onMouseDown: () => handleCellMouseDown(i),
                            onMouseEnter: () => handleCellMouseEnter(i)
                        }, showCellNumber ? cellNumber : '')
                    );
                }
                return cells;
            };

            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 p-4"
            },
                React.createElement('div', { className: "max-w-6xl mx-auto" },
                    // Header
                    React.createElement('div', { className: "text-center mb-8" },
                        React.createElement('h1', { className: "text-4xl font-bold text-indigo-800 mb-2" }, "Multiplication Practice Quiz"),
                        React.createElement('p', { className: "text-indigo-600" }, "Solve problems and earn rewards!")
                    ),

                    // Quiz Section with Sliders
                    React.createElement('div', { className: "bg-white rounded-lg p-6 shadow-md mb-6" },
                        React.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-4" }, "Problem Settings"),
                        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                            // First number slider
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, 
                                    `First Number: ${num1}`
                                ),
                                
                                // Area model labels overlaid on grid sections
                                currentBreakdown && React.createElement('div', {
                                    className: "absolute inset-0 pointer-events-none",
                                    style: { 
                                        marginLeft: cellSize * 0.8 + 8 + 16 + 16, // Account for left margin and padding
                                        marginTop: cellSize * 0.6 + 8 + 16 // Account for top margin and padding
                                    }
                                },
                                    // Top-left area label
                                    React.createElement('div', {
                                        className: "absolute bg-red-200 bg-opacity-90 rounded px-2 py-1 text-sm font-bold text-red-800 border-2 border-red-400 flex items-center justify-center",
                                        style: {
                                            left: cellSize * currentBreakdown.topLeft.cols / 2 - 30,
                                            top: cellSize * currentBreakdown.topLeft.rows / 2 - 12,
                                            minWidth: '60px',
                                            fontSize: cellSize < 15 ? '10px' : '12px'
                                        }
                                    }, `${currentBreakdown.topLeft.rows}Ã—${currentBreakdown.topLeft.cols}=${currentBreakdown.topLeft.product}`),
                                    
                                    // Top-right area label
                                    currentBreakdown.topRight && React.createElement('div', {
                                        className: "absolute bg-blue-200 bg-opacity-90 rounded px-2 py-1 text-sm font-bold text-blue-800 border-2 border-blue-400 flex items-center justify-center",
                                        style: {
                                            left: cellSize * currentBreakdown.topLeft.cols + cellSize * currentBreakdown.topRight.cols / 2 - 30,
                                            top: cellSize * currentBreakdown.topRight.rows / 2 - 12,
                                            minWidth: '60px',
                                            fontSize: cellSize < 15 ? '10px' : '12px'
                                        }
                                    }, `${currentBreakdown.topRight.rows}Ã—${currentBreakdown.topRight.cols}=${currentBreakdown.topRight.product}`),
                                    
                                    // Bottom-left area label
                                    currentBreakdown.bottomLeft && React.createElement('div', {
                                        className: "absolute bg-green-200 bg-opacity-90 rounded px-2 py-1 text-sm font-bold text-green-800 border-2 border-green-400 flex items-center justify-center",
                                        style: {
                                            left: cellSize * currentBreakdown.bottomLeft.cols / 2 - 30,
                                            top: cellSize * currentBreakdown.topLeft.rows + cellSize * currentBreakdown.bottomLeft.rows / 2 - 12,
                                            minWidth: '60px',
                                            fontSize: cellSize < 15 ? '10px' : '12px'
                                        }
                                    }, `${currentBreakdown.bottomLeft.rows}Ã—${currentBreakdown.bottomLeft.cols}=${currentBreakdown.bottomLeft.product}`),
                                    
                                    // Bottom-right area label
                                    currentBreakdown.bottomRight && React.createElement('div', {
                                        className: "absolute bg-yellow-200 bg-opacity-90 rounded px-2 py-1 text-sm font-bold text-yellow-800 border-2 border-yellow-400 flex items-center justify-center",
                                        style: {
                                            left: cellSize * currentBreakdown.topLeft.cols + cellSize * currentBreakdown.bottomRight.cols / 2 - 30,
                                            top: cellSize * currentBreakdown.topLeft.rows + cellSize * currentBreakdown.bottomRight.rows / 2 - 12,
                                            minWidth: '60px',
                                            fontSize: cellSize < 15 ? '10px' : '12px'
                                        }
                                    }, `${currentBreakdown.bottomRight.rows}Ã—${currentBreakdown.bottomRight.cols}=${currentBreakdown.bottomRight.product}`)
                                ),
                                React.createElement('input', {
                                    type: "range",
                                    min: "1",
                                    max: "30", 
                                    value: num1,
                                    onChange: (e) => {
                                        setNum1(parseInt(e.target.value));
                                        setUserAnswer('');
                                        setIsCorrect(null);
                                        setShowReward(false);
                                        resetAnimation();
                                    },
                                    className: "w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                                }),
                                React.createElement('div', { className: "flex justify-between text-xs text-gray-500 mt-1" },
                                    React.createElement('span', null, "1"),
                                    React.createElement('span', null, "15"),
                                    React.createElement('span', null, "30")
                                )
                            ),
                            
                            // Second number slider
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, 
                                    `Second Number: ${num2}`
                                ),
                                React.createElement('input', {
                                    type: "range",
                                    min: "1",
                                    max: "30",
                                    value: num2,
                                    onChange: (e) => {
                                        setNum2(parseInt(e.target.value));
                                        setUserAnswer('');
                                        setIsCorrect(null);
                                        setShowReward(false);
                                        resetAnimation();
                                    },
                                    className: "w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                                }),
                                React.createElement('div', { className: "flex justify-between text-xs text-gray-500 mt-1" },
                                    React.createElement('span', null, "1"),
                                    React.createElement('span', null, "15"),
                                    React.createElement('span', null, "30")
                                )
                            )
                        ),
                        
                        React.createElement('div', { className: "mt-4 text-center" },
                            React.createElement('button', {
                                onClick: generateNewProblem,
                                className: "bg-purple-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors"
                            }, "Generate Random Problem")
                        )
                    ),
                    // Practice Counter
                    React.createElement('div', { className: "bg-white rounded-lg p-4 shadow-md mb-6" },
                        React.createElement('h3', { className: "text-lg font-semibold text-gray-800 mb-3" }, "Practice Progress"),
                        React.createElement('div', { className: "grid grid-cols-3 gap-4" },
                            React.createElement('div', { className: "text-center p-3 bg-green-100 rounded-lg" },
                                React.createElement('div', { className: "text-2xl font-bold text-green-600" }, practices.singleDigit),
                                React.createElement('div', { className: "text-sm text-green-600" }, "Single Digit"),
                                React.createElement('div', { className: "text-xs text-gray-500" }, "1-9 Ã— 1-9")
                            ),
                            React.createElement('div', { className: "text-center p-3 bg-blue-100 rounded-lg" },
                                React.createElement('div', { className: "text-2xl font-bold text-blue-600" }, practices.doubleDigit),
                                React.createElement('div', { className: "text-sm text-blue-600" }, "Double Digit"),
                                React.createElement('div', { className: "text-xs text-gray-500" }, "10-99 involved")
                            ),
                            React.createElement('div', { className: "text-center p-3 bg-purple-100 rounded-lg" },
                                React.createElement('div', { className: "text-2xl font-bold text-purple-600" }, practices.tripleDigit),
                                React.createElement('div', { className: "text-sm text-purple-600" }, "Triple Digit"),
                                React.createElement('div', { className: "text-xs text-gray-500" }, "100+ involved")
                            )
                        )
                    ),

                    // Quiz Section
                    React.createElement('div', { className: "text-center mb-6" },
                        React.createElement('div', { 
                            className: `bg-white rounded-lg p-8 shadow-md inline-block ${showReward ? 'celebration' : ''}` 
                        },
                            React.createElement('div', { className: "text-5xl font-bold text-gray-800 mb-6 flex items-center justify-center gap-4" },
                                `${num1} Ã— ${num2} = `,
                                React.createElement('input', {
                                    type: "number",
                                    value: userAnswer,
                                    onChange: (e) => setUserAnswer(e.target.value),
                                    onKeyPress: handleKeyPress,
                                    className: `text-4xl text-center border-2 border-gray-300 rounded-lg px-4 py-2 w-32 focus:border-indigo-500 focus:outline-none ${
                                        isCorrect === true ? 'border-green-500 bg-green-50' : 
                                        isCorrect === false ? 'border-red-500 bg-red-50' : ''
                                    }`,
                                    placeholder: "?",
                                    disabled: showReward
                                })
                            ),

                            React.createElement('div', { className: "mb-4" },
                                React.createElement('button', {
                                    onClick: checkAnswer,
                                    disabled: userAnswer.trim() === '' || showReward,
                                    className: "bg-indigo-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
                                }, "Check Answer")
                            ),

                            // Feedback
                            isCorrect === true && showReward && React.createElement('div', { 
                                className: "mt-4 p-4 bg-green-100 text-green-800 rounded-lg flex items-center justify-center gap-2" 
                            },
                                React.createElement(Trophy),
                                React.createElement('span', { className: "text-xl font-bold" }, "ðŸŽ‰ Excellent! "),
                                Array.from({length: 5}, (_, i) => React.createElement(Star, { key: i, className: "text-yellow-500" }))
                            ),

                            isCorrect === false && React.createElement('div', { 
                                className: "mt-4 p-4 bg-red-100 text-red-800 rounded-lg" 
                            },
                                React.createElement('span', { className: "text-lg font-semibold" }, "Not quite! Try again or use the visual helper below.")
                            ),

                            React.createElement('div', { className: "mt-4" },
                                React.createElement('button', {
                                    onClick: generateNewProblem,
                                    className: "bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors"
                                }, "New Problem")
                            )
                        )
                    ),

                    // Visualization Controls
                    React.createElement('div', { className: "bg-white rounded-lg p-6 shadow-md mb-6" },
                        React.createElement('h3', { className: "text-lg font-semibold text-gray-700 mb-4" }, "Visual Helper"),
                        React.createElement('div', { className: "flex flex-wrap gap-3" },
                            React.createElement('button', {
                                onClick: startAnimation,
                                className: "bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center gap-2"
                            }, React.createElement(Play), "Count Units"),
                            
                            React.createElement('button', {
                                onClick: showAll,
                                className: "bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors"
                            }, "Show All"),
                            
                            React.createElement('button', {
                                onClick: resetAnimation,
                                className: "bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors flex items-center gap-2"
                            }, React.createElement(RotateCcw), "Reset"),
                            
                            React.createElement('button', {
                                onClick: clearSelection,
                                className: "bg-orange-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-700 transition-colors"
                            }, "Clear Selection"),

                            React.createElement('select', {
                                value: colorMode,
                                onChange: (e) => setColorMode(e.target.value),
                                className: "px-4 py-2 border border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                            },
                                React.createElement('option', { value: "fill" }, "Solid Blue"),
                                React.createElement('option', { value: "rows" }, "Row Colors"),
                                React.createElement('option', { value: "rainbow" }, "Rainbow")
                            )
                        )
                    ),
                    
                    // Grid Visualization
                    React.createElement('div', { className: "bg-white rounded-lg p-6 shadow-md" },
                        React.createElement('div', { className: "flex justify-center" },
                            React.createElement('div', { className: "inline-block" },
                                // Top numbers
                                React.createElement('div', { 
                                    className: "flex mb-2", 
                                    style: { marginLeft: cellSize * 0.8 + 8 + 16 } 
                                },
                                    Array.from({length: num2}, (_, i) => 
                                        React.createElement('div', {
                                            key: i,
                                            className: "flex items-center justify-center font-bold text-indigo-600",
                                            style: { 
                                                width: cellSize,
                                                height: cellSize * 0.6,
                                                fontSize: cellSize < 25 ? '12px' : '14px',
                                                marginRight: '4px'
                                            }
                                        }, i + 1)
                                    )
                                ),
                                
                                // Grid with left and right numbers
                                React.createElement('div', { className: "flex" },
                                    // Left numbers
                                    React.createElement('div', { 
                                        className: "flex flex-col", 
                                        style: { marginRight: '8px', paddingTop: '16px' } 
                                    },
                                        Array.from({length: num1}, (_, i) => 
                                            React.createElement('div', {
                                                key: i,
                                                className: "flex items-center justify-center font-bold text-indigo-600",
                                                style: { 
                                                    width: cellSize * 0.8,
                                                    height: cellSize,
                                                    fontSize: cellSize < 25 ? '12px' : '14px',
                                                    marginBottom: '4px'
                                                }
                                            }, i + 1)
                                        )
                                    ),
                                    
                                    // Main grid
                                    React.createElement('div', {
                                        className: "grid p-4 bg-gray-50 rounded-lg relative",
                                        style: { 
                                            gridTemplateColumns: `repeat(${num2}, 1fr)`,
                                            gap: '4px',
                                            maxWidth: '80vw',
                                            overflow: 'auto'
                                        }
                                    }, ...renderGrid()),

                                    // Right numbers
                                    React.createElement('div', { 
                                        className: "flex flex-col", 
                                        style: { marginLeft: '8px', paddingTop: '16px' } 
                                    },
                                        Array.from({length: num1}, (_, i) => 
                                            React.createElement('div', {
                                                key: i,
                                                className: "flex items-center justify-center font-bold text-indigo-600",
                                                style: { 
                                                    width: cellSize * 0.8,
                                                    height: cellSize,
                                                    fontSize: cellSize < 25 ? '12px' : '14px',
                                                    marginBottom: '4px'
                                                }
                                            }, i + 1)
                                        )
                                    )
                                ),

                                // Bottom column counts for breakdown visualization
                                (isSelecting ? (selectionEnd.col + 1) : num2) > 10 && React.createElement('div', { 
                                    className: "flex justify-center mt-4", 
                                    style: { marginLeft: cellSize * 0.8 + 8 + 16 } 
                                },
                                    React.createElement('div', { className: "flex gap-2" },
                                        // First 10 columns count
                                        React.createElement('div', { 
                                            className: "text-center p-3 bg-red-100 border-2 border-red-300 rounded-lg",
                                            style: { width: cellSize * Math.min(10, (isSelecting ? (selectionEnd.col + 1) : num2)) + 36 }
                                        },
                                            React.createElement('div', { className: "text-lg font-bold text-red-700" }, 
                                                isSelecting ? 
                                                `${selectionEnd.row + 1} Ã— ${Math.min(10, selectionEnd.col + 1)} = ${(selectionEnd.row + 1) * Math.min(10, selectionEnd.col + 1)}` :
                                                `${num1} Ã— 10 = ${num1 * 10}`
                                            ),
                                            React.createElement('div', { className: "text-sm text-red-600" }, 
                                                isSelecting ? 
                                                `First ${Math.min(10, selectionEnd.col + 1)} columns` :
                                                "First 10 columns"
                                            )
                                        ),
                                        
                                        // Remaining columns count (only show if there are remaining columns)
                                        (isSelecting ? (selectionEnd.col + 1) : num2) > 10 && React.createElement('div', { 
                                            className: "text-center p-3 bg-blue-100 border-2 border-blue-300 rounded-lg",
                                            style: { width: cellSize * ((isSelecting ? (selectionEnd.col + 1) : num2) - 10) + ((isSelecting ? (selectionEnd.col + 1) : num2) - 10) * 4 - 4 }
                                        },
                                            React.createElement('div', { className: "text-lg font-bold text-blue-700" }, 
                                                isSelecting ?
                                                `${selectionEnd.row + 1} Ã— ${selectionEnd.col + 1 - 10} = ${(selectionEnd.row + 1) * (selectionEnd.col + 1 - 10)}` :
                                                `${num1} Ã— ${num2 - 10} = ${num1 * (num2 - 10)}`
                                            ),
                                            React.createElement('div', { className: "text-sm text-blue-600" }, 
                                                isSelecting ?
                                                `Last ${selectionEnd.col + 1 - 10} columns` :
                                                `Last ${num2 - 10} columns`
                                            )
                                        )
                                    )
                                ),

                                // Total breakdown explanation
                                (isSelecting ? (selectionEnd.col + 1) : num2) > 10 && React.createElement('div', { className: "text-center mt-3 p-3 bg-green-100 border-2 border-green-300 rounded-lg" },
                                    React.createElement('div', { className: "text-xl font-bold text-green-700" }, 
                                        isSelecting ?
                                        `${selectionEnd.row + 1} Ã— ${selectionEnd.col + 1} = ${(selectionEnd.row + 1) * Math.min(10, selectionEnd.col + 1)} + ${selectionEnd.col + 1 > 10 ? (selectionEnd.row + 1) * (selectionEnd.col + 1 - 10) : 0} = ${(selectionEnd.row + 1) * (selectionEnd.col + 1)}` :
                                        `${num1} Ã— ${num2} = ${num1 * 10} + ${num1 * (num2 - 10)} = ${num1 * num2}`
                                    ),
                                    React.createElement('div', { className: "text-sm text-green-600 mt-1" }, 
                                        isSelecting ?
                                        `Breaking ${selectionEnd.col + 1} into ${Math.min(10, selectionEnd.col + 1)}${selectionEnd.col + 1 > 10 ? ` + ${selectionEnd.col + 1 - 10}` : ''} makes multiplication easier!` :
                                        `Breaking ${num2} into 10 + ${num2 - 10} makes multiplication easier!`
                                    )
                                )
                            )
                        ),
                        
                        // Grid info
                        React.createElement('div', { className: "mt-4 text-center text-sm text-gray-600" },
                            React.createElement('div', { className: "mb-2" },
                                React.createElement('span', { className: "inline-block bg-blue-100 px-3 py-1 rounded-full mr-4" }, `${num1} rows Ã— ${num2} columns`),
                                isSelecting && React.createElement('span', { className: "inline-block bg-orange-100 px-3 py-1 rounded-full" }, 
                                    `Selected: ${selectionEnd.row + 1} Ã— ${selectionEnd.col + 1} = ${(selectionEnd.row + 1) * (selectionEnd.col + 1)} cells`)
                            ),
                            React.createElement('div', { className: "text-xs text-gray-500" }, "Use the grid to visualize the multiplication!")
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(MultiplicationPractice), document.getElementById('root'));
    </script>
</body>
</html>
